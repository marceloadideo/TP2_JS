<!DOCTYPE html>
<html>

<head>
    <title>Validación en evento blur y focus con 3 campos de entrada</title>
</head>

<body>
    <h1> Si metes la pata, lanza error al salir. Si retomas el foco, se aclara el error</h1>
    <h2>blur y focus</h2>
    <input type="text" id="nombre" placeholder="Nombre">
    <span id="errorNombre" style="color: red;"></span>
    <br>
    <input type="text" id="apellido" placeholder="Apellido">
    <span id="errorApellido" style="color: red;"></span>
    <br>
    <input type="email" id="email" placeholder="Email">
    <span id="errorEmail" style="color: red;"></span>

    <script>
        // Obtenemos los elementos de entrada y los mensajes de error
        const nombre = document.getElementById('nombre');
        const errorNombre = document.getElementById('errorNombre');

        const apellido = document.getElementById('apellido');
        const errorApellido = document.getElementById('errorApellido');

        const email = document.getElementById('email');
        const errorEmail = document.getElementById('errorEmail');

        // Función de validación para el campo 1
        function validarNombre() {
            let valor = nombre.value;

            if (valor.length < 3) {
                errorNombre.textContent = 'El Nombre debe tener al menos 3 caracteres';
            } else {
                errorNombre.textContent = '';
            }
            if  (valor.includes(' ') ){
                errorNombre.textContent = '';
            }else {
                errorNombre.textContent = 'Complete bien el Nombre! le falta un espacio';
            }
        }

        // Función de validación para el campo 2
        function validarApellido() {
            const valor = apellido.value;

            if (valor.length < 3) {
                errorApellido.textContent = 'El Apellido debe tener al menos 3 caracteres';
            } else {
                errorApellido.textContent = '';
            }
        }

        // Función de validación para el campo 3
        function validarEmail() {
            let valor = email.value;
            emailRegex = /^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;
            //Se muestra un texto a modo de ejemplo, luego va a ser un icono

            if (emailRegex.test(valor))  {
                errorEmail.textContent = '';
                
            } else {
                errorEmail.textContent = 'Complete bien el Email!';
            }
        } //validarEmail

        function ocultarErrorNombre() {
            errorNombre.textContent = '';
        }
        function ocultarErrorApellido() {
            errorApellido.textContent = '';
        }
        function ocultarErrorEmail() {
            errorEmail.textContent = '';
        }

        // Asociamos el evento blur a cada campo de entrada
        nombre.addEventListener('blur', validarNombre);
        nombre.addEventListener('focus', ocultarErrorNombre);

        apellido.addEventListener('blur', validarApellido);
        apellido.addEventListener('focus', ocultarErrorApellido);

        email.addEventListener('blur', validarEmail);
        email.addEventListener('focus', ocultarErrorEmail);
    </script>
</body>

</html>